---
// PartnerNetworkMap.astro
// Component for displaying network expansion opportunities to imaging center partners

export interface Props {
  title?: string;
  subtitle?: string;
  badge?: string;
  showStats?: boolean;
  showMarketOpportunity?: boolean;
  ctaText?: string;
  ctaLink?: string;
}

const {
  title = "Network Expansion Opportunities",
  subtitle = "We're actively building partnerships in high-demand markets where imaging centers can capitalize on significant unmet patient needs.",
  badge = "Active Expansion",
  showStats = true,
  showMarketOpportunity = true,
  ctaText = "Apply to Join Our Network â†’",
  ctaLink = "/imaging-center/apply",
} = Astro.props;

// Market data - can be easily updated here
const marketStats = [
  { value: "90M+", label: "Underinsured Americans" },
  { value: "35%", label: "Typical Slot Utilization" },
  { value: "$2.8B", label: "Addressable Market" },
];

const opportunityStats = [
  { value: "65%", label: "Average Unfilled Appointment Slots" },
  { value: "100%", label: "Payment Collection Rate" },
  { value: "15 Days", label: "Guaranteed Payment Timeline" },
];

// Map pin data - easily maintainable
const mapPins = [
  {
    top: "77%",
    left: "77.5%",
    state: "Florida",
    context: "High patient demand",
    delay: 300,
  },
  {
    top: "74%",
    left: "46%",
    state: "Texas",
    context: "Major metro expansion",
    delay: 500,
  },
  {
    top: "62%",
    left: "72%",
    state: "Georgia",
    context: "Southeast growth hub",
    delay: 400,
  },
  {
    top: "57%",
    left: "77%",
    state: "South Carolina",
    context: "Regional expansion",
    delay: 600,
  },
  {
    top: "49%",
    left: "79%",
    state: "North Carolina",
    context: "Rapid growth market",
    delay: 700,
  },
  {
    top: "21%",
    left: "81%",
    state: "New York",
    context: "Premium opportunity",
    delay: 800,
  },
  {
    top: "32%",
    left: "83%",
    state: "New Jersey",
    context: "Northeast corridor",
    delay: 900,
  },
  {
    top: "30.5%",
    left: "78%",
    state: "Pennsylvania",
    context: "Key metro areas",
    delay: 1000,
  },
  {
    top: "35%",
    left: "62%",
    state: "Illinois",
    context: "Midwest gateway",
    delay: 1100,
  },
  {
    top: "45%",
    left: "13%",
    state: "California",
    context: "Largest market potential",
    delay: 1200,
  },
];
---

<!-- Network Expansion Opportunities Map Section -->
<section class="bg-[#f0f4f9] py-24 relative overflow-hidden">
  <!-- Background decorative elements -->
  <div
    class="absolute top-20 left-20 w-64 h-64 rounded-full bg-[#cc9933] opacity-[0.05] blur-3xl"
  >
  </div>
  <div
    class="absolute bottom-20 right-20 w-72 h-72 rounded-full bg-[#003087] opacity-[0.05] blur-3xl"
  >
  </div>

  <div class="max-w-5xl mx-auto px-6 sm:px-12 text-center relative z-10">
    <!-- Header Section -->
    <div
      class="flex flex-col items-center justify-center sm:flex-row sm:justify-center gap-2 mb-4"
    >
      <p
        class="text-xl sm:text-2xl font-semibold uppercase tracking-wide text-[#cc9933] font-manrope"
      >
        Priority Markets
      </p>
      <span
        class="bg-[#003087] text-white text-xs font-semibold px-3 py-1 rounded-full uppercase tracking-wide"
      >
        {badge}
      </span>
    </div>

    <h2 class="text-3xl sm:text-4xl font-bold text-[#003087] mb-6 font-manrope">
      {title}
    </h2>

    <p class="text-lg text-gray-700 mb-4 max-w-3xl mx-auto font-manrope">
      {subtitle}
    </p>

    <!-- Market Stats -->
    {
      showStats && (
        <div
          class="grid grid-cols-1 sm:grid-cols-3 gap-4 mb-12 max-w-2xl mx-auto"
          data-aos="fade-up"
          data-aos-delay="100"
        >
          {marketStats.map((stat) => (
            <div class="bg-white p-4 rounded-lg shadow-md">
              <div class="text-2xl font-bold text-[#cc9933] mb-1">
                {stat.value}
              </div>
              <div class="text-sm text-gray-600">{stat.label}</div>
            </div>
          ))}
        </div>
      )
    }

    <!-- Map Container -->
    <div
      class="relative bg-white border border-[#e6c378]/30 rounded-3xl p-8 shadow-2xl"
      data-aos="zoom-in"
      data-aos-delay="200"
    >
      <!-- US Map -->
      <img
        src="/images/usa-transparent.svg"
        alt="US Map showing USRad priority markets"
        loading="lazy"
        class="w-full mx-auto max-w-3xl rounded-xl"
      />

      <!-- Interactive Pin Container -->
      <div class="absolute inset-0">
        {
          mapPins.map((pin) => (
            <div
              class="group absolute"
              style={`top: ${pin.top}; left: ${pin.left};`}
            >
              <img
                src="/images/usrad-pin-dark.png"
                data-aos="fade-up"
                data-aos-delay={pin.delay}
                class="w-6 sm:w-7 md:w-8 h-auto transition-transform duration-200 group-hover:scale-125"
              />
              <div class="absolute bottom-full left-1/2 -translate-x-1/2 mb-2 hidden group-hover:flex flex-col items-center">
                <div class="px-3 py-2 bg-[#003087] text-white text-xs rounded shadow-lg text-center whitespace-nowrap">
                  <div class="font-semibold">{pin.state}</div>
                  <div class="text-[10px] opacity-90">{pin.context}</div>
                </div>
              </div>
            </div>
          ))
        }
      </div>
    </div>

    <!-- Partner-Focused Bottom Content -->
    <div class="mt-12 space-y-8">
      <!-- Market Opportunity Summary -->
      {
        showMarketOpportunity && (
          <div
            class="bg-gradient-to-r from-[#003087] to-[#0052cc] rounded-2xl p-8 text-white"
            data-aos="fade-up"
            data-aos-delay="400"
          >
            <h3 class="text-2xl font-bold mb-4 font-manrope">
              Market Opportunity
            </h3>
            <div class="grid md:grid-cols-3 gap-6 text-center">
              {opportunityStats.map((stat) => (
                <div>
                  <div class="text-3xl font-bold text-[#cc9933] mb-2">
                    {stat.value}
                  </div>
                  <div class="text-sm opacity-90">{stat.label}</div>
                </div>
              ))}
            </div>
          </div>
        )
      }

      <!-- Call to Action -->
      <div class="text-center">
        <p class="text-lg text-gray-700 mb-6 font-manrope">
          Position your imaging center in these high-growth markets and start
          capturing incremental revenue from day one.
        </p>
        <div
          class="flex flex-col sm:flex-row gap-4 justify-center items-center"
        >
          <a
            href={ctaLink}
            class="bg-[#cc9933] text-[#003087] px-8 py-4 rounded-xl shadow-md hover:bg-[#e6c378] hover:scale-105 hover:shadow-xl transition-all duration-300 font-semibold font-manrope"
          >
            {ctaText}
          </a>
          <a
            href="/imaging-center/market-analysis"
            class="text-[#003087] hover:text-[#cc9933] transition-colors font-medium inline-flex items-center font-manrope"
          >
            View Detailed Market Analysis
            <svg
              class="ml-2 w-4 h-4"
              xmlns="http://www.w3.org/2000/svg"
              fill="none"
              viewBox="0 0 24 24"
              stroke="currentColor"
            >
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                stroke-width="2"
                d="M14 5l7 7m0 0l-7 7m7-7H3"></path>
            </svg>
          </a>
        </div>
      </div>
    </div>
  </div>
</section>
