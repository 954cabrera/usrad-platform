---
// src/pages/patient-dashboard/index.astro
import PatientDashboardLayout from "../../components/patient-dashboard/PatientDashboardLayout.astro"; // FIXED
import { validateAuthSession } from "../../lib/auth";
import { AuthService } from "../../lib/auth";
import SkeletonDashboardSystem from "../../components/patient-dashboard/SkeletonDashboardSystem";

// Validate authentication
const { session, user } = await validateAuthSession(Astro.request);

if (!session || !user) {
  return Astro.redirect("/login/patientlogin"); // Also changed to patient login
}

// Get dashboard data (if you have patient dashboard data)
// const dashboardData = await AuthService.getPatientDashboardData(user.id);
---

<PatientDashboardLayout title="Dashboard Overview" user={user}>
  <SkeletonDashboardSystem client:load />
</PatientDashboardLayout>
